<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Transformer</title>
<style>
  body {
    background: #b60000;
    color: #fff;
    font-family: Arial, sans-serif;
  }
  .container {
    max-width: 900px;
    margin: 40px auto;
    background: rgba(255,255,255,0.25);
    padding: 24px;
    border-radius: 16px;
    position: relative;
  }
  h1 {
    margin-top: 0;
  }
  iframe {
    width: 100%;
    height: 80vh;
    border: none;
    border-radius: 10px;
    margin-top: 20px;
  }
  footer.footer {
    margin-top: 20px;
    font-size: 0.9em;
    opacity: 0.8;
  }

  /* Modal Styles */
  .modal {
    display: none; /* Hidden by default */
    position: fixed;
    z-index: 9999;
    left: 0; top: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.8);
    justify-content: center;
    align-items: center;
  }
  .modal-content {
    position: relative;
    max-width: 90vw;
    max-height: 90vh;
    overflow: hidden;
  }
  .modal-content img {
    max-width: 100%;
    max-height: 100%;
    display: block;
  }
  button.close-btn {
    position: absolute;
    top: 8px;
    right: 48px; /* shifted left to fit return home */
    color: white;
    font-size: 24px;
    font-weight: bold;
    cursor: pointer;
    user-select: none;
    background: rgba(0,0,0,0.5);
    border-radius: 50%;
    width: 32px;
    height: 32px;
    line-height: 32px;
    text-align: center;
    border: none;
  }
  button.close-btn:focus {
    outline: 2px solid #00c2ff;
  }

  /* Neon Red Return to Home button */
  button.return-home-btn {
    position: absolute;
    top: 16px;
    right: 16px;
    background: #ff0000;
    color: #fff;
    font-weight: bold;
    border: none;
    padding: 6px 14px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    user-select: none;
    text-shadow: 0 0 5px #ff0000, 0 0 10px #ff0000, 0 0 20px #ff0000;
    box-shadow:
      0 0 5px #ff0000,
      0 0 10px #ff0000,
      0 0 20px #ff0000,
      0 0 40px #ff0000;
    transition: box-shadow 0.3s ease, background-color 0.3s ease;
  }
  button.return-home-btn:hover,
  button.return-home-btn:focus {
    box-shadow:
      0 0 10px #ff1a1a,
      0 0 20px #ff1a1a,
      0 0 40px #ff1a1a,
      0 0 80px #ff1a1a;
    background: #ff1a1a;
    outline: none;
  }

  /* Magnifier Lens */
  .img-magnifier-glass {
    position: absolute;
    border: 3px solid #fff;
    border-radius: 50%;
    cursor: none;
    width: 450px;
    height: 450px;
    box-shadow: 0 0 8px #fff;
    display: none;
    pointer-events: none; /* Let mouse events pass through */
  }

  /* Responsive adjustments */
  @media (max-width: 600px) {
    .img-magnifier-glass {
      width: 250px;
      height: 250px;
    }
  }
</style>
</head>

<body>
<div class="container">
  <h1>Transformer</h1>

  <iframe 
      src=""
      style="width:100%;height:80vh;border:none;border-radius:10px;margin-top:20px;"
      allowfullscreen
      title="Embedded Content"
  ></iframe>
    
  <footer class="footer">Â© Intellectual Property of NEXUS Data Science. Created in joint venture with ACE Electric. All rights reserved.</footer>
</div>

<!-- Modal structure -->
<div id="imgModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-describedby="modalDesc">
  <div class="modal-content">
    <button class="return-home-btn" id="returnHomeBtn" tabindex="0" aria-label="Return to Home">Return to Home</button>
    <button class="close-btn" aria-label="Close modal">&times;</button>
    <img id="modalImg" src="single_line.png" alt="Transformer Image" />
    <div class="img-magnifier-glass" id="magnifier"></div>
  </div>
</div>

<script>
  const modal = document.getElementById('imgModal');
  const closeBtn = modal.querySelector('.close-btn');
  const returnHomeBtn = document.getElementById('returnHomeBtn');
  const img = document.getElementById('modalImg');
  const magnifier = document.getElementById('magnifier');

  let moveMagnifierFn;

  function magnify(img, zoom) {
    let glass = magnifier;
    let w, h, bw;

    glass.style.backgroundImage = `url('${img.src}')`;
    glass.style.backgroundRepeat = 'no-repeat';
    glass.style.backgroundSize = (img.width * zoom) + 'px ' + (img.height * zoom) + 'px';
    bw = 6;
    w = glass.offsetWidth / 2;
    h = glass.offsetHeight / 2;

    glass.style.display = 'block';

    moveMagnifierFn = function(e) {
      e.preventDefault();
      let pos, x, y;
      pos = getCursorPos(e);
      x = pos.x;
      y = pos.y;

      if (x > img.width - (w / zoom)) { x = img.width - (w / zoom); }
      if (x < w / zoom) { x = w / zoom; }
      if (y > img.height - (h / zoom)) { y = img.height - (h / zoom); }
      if (y < h / zoom) { y = h / zoom; }

      glass.style.left = (x - w) + 'px';
      glass.style.top = (y - h) + 'px';
      glass.style.backgroundPosition = '-' + ((x * zoom) - w + bw) + 'px -' + ((y * zoom) - h + bw) + 'px';
    };

    function getCursorPos(e) {
      let a, x = 0, y = 0;
      e = e || window.event;
      a = img.getBoundingClientRect();
      x = e.pageX - a.left - window.pageXOffset;
      y = e.pageY - a.top - window.pageYOffset;
      return { x: x, y: y };
    }

    img.addEventListener("mousemove", moveMagnifierFn);
    glass.addEventListener("mousemove", moveMagnifierFn);
    img.addEventListener("touchmove", moveMagnifierFn);
  }

  function removeMagnifier() {
    magnifier.style.display = 'none';
    if (moveMagnifierFn) {
      img.removeEventListener("mousemove", moveMagnifierFn);
      magnifier.removeEventListener("mousemove", moveMagnifierFn);
      img.removeEventListener("touchmove", moveMagnifierFn);
      moveMagnifierFn = null;
    }
  }

  function openModal() {
    modal.style.display = 'flex';
    magnify(img, 4);
    document.body.style.overflow = 'hidden'; // Disable background scroll
  }

  function closeModal() {
    modal.style.display = 'none';
    removeMagnifier();
    document.body.style.overflow = ''; // Re-enable scroll
  }

  // Open modal on page load
  window.onload = function() {
    openModal();
  };

  closeBtn.onclick = closeModal;

  returnHomeBtn.onclick = function() {
    closeModal();
    window.location.href = 'index.html'; // Change to your home URL if needed
  };

  modal.onclick = function(e) {
    if (e.target === modal) {
      closeModal();
    }
  };

  // Close modal on ESC key
  document.addEventListener('keydown', function(e) {
    if (e.key === "Escape" && modal.style.display === 'flex') {
      closeModal();
    }
  });
</script>
</body>
</html>
